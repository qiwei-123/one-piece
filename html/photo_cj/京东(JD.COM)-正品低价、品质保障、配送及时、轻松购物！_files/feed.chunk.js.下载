(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"1u2O":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,o("rE2o"),o("ioFf"),o("rGqo"),o("yt8O"),o("RW0V"),o("91GP"),o("/SS/"),o("KKXr"),o("pIFo");var n=_interopRequireDefault(o("aP5i")),r=_interopRequireDefault(o("CSDR")),i=_interopRequireDefault(o("mreV")),a=_interopRequireDefault(o("L6Ds")),s=o("1BlJ"),c=o("n5if"),l=o("szSY"),u=o("R1gS"),d=o("Ykg6");function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,o[t])})}return e}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var f=function(e){function GoodsItem(){var e,t,o;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GoodsItem);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _possibleConstructorReturn(o,(t=o=_possibleConstructorReturn(this,(e=_getPrototypeOf(GoodsItem)).call.apply(e,[this].concat(r))),_defineProperty(_assertThisInitialized(_assertThisInitialized(o)),"isSkuSelf",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(o)),"poi",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(o)),"poiSuffix",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(o)),"url",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(o)),"extColumns",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(o)),"lazyLoaded",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(o)),"sendImpr",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(o)),"renderCount",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(o)),"dom",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(o)),"enableHoverShow",function(){-1===o.dom.className.indexOf("hover-on")&&(o.dom.className+=" hover-on")}),_defineProperty(_assertThisInitialized(_assertThisInitialized(o)),"cancelHoverShow",function(){-1!==o.dom.className.indexOf("hover-on")&&(o.dom.className=o.dom.className.replace("hover-on",""))}),t))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(GoodsItem,n["default"].PureComponent),function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}(GoodsItem,[{key:"componentDidMount",value:function componentDidMount(){this.enableHoverShow()}},{key:"getPriceDOM",value:function getPriceDOM(){var e=this.props,t=e.yuShouHidePrice,o=e.price,r=e.tpp,i=e.yuYueHidePrice,a=e.priceReady,s=e.promote,c=e.hasCoupon,l=e.nup;if(this.renderCount=(this.renderCount||0)+1,a){if(i||t)return n["default"].createElement("div",{className:"more2_info_price"},n["default"].createElement("div",{className:"mod_price"},n["default"].createElement("i",null,"¥"),n["default"].createElement("span",{className:"more2_info_price_tip"},"待发布")));if(o)return r?n["default"].createElement("div",{className:"more2_info_price more2_info_price_plus more2_info_price_newcomer"},n["default"].createElement("div",{className:"mod_price"},n["default"].createElement("i",null,"¥"),n["default"].createElement("span",{className:"more2_info_price_txt"},o.split(".")[0]+".",n["default"].createElement("span",{className:"more2_info_price_txt-decimal"},o.split(".")[1]))),n["default"].createElement("div",{className:"more2_price_plus"},n["default"].createElement("div",{className:"mod_price"},n["default"].createElement("i",null,"¥"),n["default"].createElement("span",{className:"more2_info_price_txt"},r)),n["default"].createElement("i",{className:"more2_price_plus_ico"}))):l?n["default"].createElement("div",{className:"more2_info_price more2_info_price_plus more2_info_price_newcomer"},n["default"].createElement("div",{className:"mod_price"},n["default"].createElement("i",null,"¥"),n["default"].createElement("span",{className:"more2_info_price_txt"},o.split(".")[0]+".",n["default"].createElement("span",{className:"more2_info_price_txt-decimal"},o.split(".")[1]))),n["default"].createElement("div",{className:"more2_price_newcomer"},n["default"].createElement("div",{className:"mod_price"},n["default"].createElement("i",null,"¥"),n["default"].createElement("span",{className:"more2_info_price_txt"},l)),n["default"].createElement("i",{className:"more2_price_newcomer_ico"}))):n["default"].createElement("div",{className:"more2_info_price more2_info_price_plus more2_info_price_newcomer"},n["default"].createElement("div",{className:"mod_price"},n["default"].createElement("i",null,"¥"),n["default"].createElement("span",{className:"more2_info_price_txt"},o.split(".")[0]+".",n["default"].createElement("span",{className:"more2_info_price_txt-decimal"},o.split(".")[1]))),(c||s)&&n["default"].createElement("div",{className:"more2_price_plus"},n["default"].createElement("div",{className:"more2_discount"},c?"券":s?"满减":"")))}}},{key:"render",value:function render(){var e=this,t=this.props,o=t.sku,a=t.img,f=t.t,p=t.k,_=t.originIndex,m=t.source,h=t.clk,y=t.isMore,g=t.deletable,b=t.extendable,v=t.findMore,P=t.deleteOne,O=t.priceAllReady,I=t.isChosen,T=t.moreIdx,E=t.moreFromIdx,C=t.poi,S=t.ext_columns,k=t.hasCoupon,D=t.promote,N=t.price,R=t.tpp,z=t.nup,w=t.isOverseaPurchase,x=t.client_exposal_url,j=t.extension_id,A=t.__nervkey,L=t.isWide,M=t.isHiddenSelfOperator,G=(0,u.isSkuSelf)(o)&&!M,F="".concat(C,"#pd"),U=(0,l.padding)((_||p)+1,3);y&&(U="".concat((0,l.padding)(E+1,3),"-").concat((0,l.padding)(T+1,2)));var H="//item.jd.com/".concat(o,".html"),Y=S||{},q=k?"02":D?"01":"null",B={0:"02",1:"01"}[m]||"02";return Y.desc="null#".concat(B,"#").concat(G?"01":"02","#").concat(q,"#").concat(N,"#").concat(R?"01":z?"02":"null","#").concat(j||"null"),n["default"].createElement("li",{className:"more2_item more2_item_good",key:"g_".concat(A),onMouseLeave:this.enableHoverShow,ref:function ref(t){return e.dom=t}},n["default"].createElement(r["default"],_extends({},d.LAZYIMPROPTS,{placeholderClassName:"o2_impr",onLoad:function onLoad(){x&&(0,s.sendImageLog)(x,"1"!==m)}})),"1"===m&&n["default"].createElement("span",{className:"more2_item_gdot"}),n["default"].createElement("a",{className:"more2_lk",href:H,target:"_blank",title:f,"aria-label":f,clstag:"".concat(d.CLSTAGPREFIX).concat(F,"_").concat(U).concat(y?"":"-a"),onClick:function onClick(){(0,c.reportClick)(_objectSpread({text:"".concat(o),url:H},Y,{poi:"".concat(F,"|").concat(U).concat(y?"":"-a")})),h&&(0,s.sendImageLog)(h)}},n["default"].createElement(r["default"],_extends({},d.LAZYIMGOPTS,{height:L?220:180}),n["default"].createElement(i["default"],{className:"more2_img",src:a,alt:f})),n["default"].createElement("div",{className:"more2_info"},n["default"].createElement("p",{className:"more2_info_name"},O&&(I?n["default"].createElement("i",{className:"more2_info_chosen"}):w&&"0"!==w?n["default"].createElement("i",{className:"more2_international"}):G&&n["default"].createElement("i",{className:"more2_info_self"},"自营")),f),this.getPriceDOM()),(b||g)&&n["default"].createElement("div",{className:"more2_item_hover"},g&&n["default"].createElement("div",{className:"more2_item_delete",clstag:"".concat(d.CLSTAGPREFIX,"|").concat(F,"_").concat(U,"-b"),title:"不喜欢",onClick:function onClick(t){t.stopPropagation(),t.preventDefault(),g&&(P(),(0,c.reportClick)(_objectSpread({},Y,{poi:"".concat(F,"|").concat(U,"-b"),text:"".concat(o),url:H})),e.cancelHoverShow())}}),n["default"].createElement("div",{className:"more2_item_hd",title:""},n["default"].createElement("div",{className:"more2_item_btn more2_btn_find ".concat(b?"enable":"disabled"),clstag:"".concat(d.CLSTAGPREFIX,"|").concat(F,"_").concat(U,"-c"),onClick:function onClick(e){e.preventDefault(),e.stopPropagation(),b&&(v(),(0,c.reportClick)(_objectSpread({},Y,{poi:"".concat(F,"|").concat(U,"-c"),text:"".concat(o),url:H})))}},n["default"].createElement("i",{className:"more2_btn_icon"}),n["default"].createElement("span",null,"找相似"))))))}}]),GoodsItem}(),p=(0,a["default"])(f);t["default"]=p},"64dS":function(e,t,o){},"8a7r":function(e,t,o){"use strict";var n=o("hswa"),r=o("RjD/");e.exports=function(e,t,o){t in e?n.f(e,t,r(0,o)):e[t]=o}},Br24:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=t.ContentType=void 0,o("rE2o"),o("ioFf"),o("91GP"),o("rGqo"),o("yt8O"),o("RW0V"),o("/SS/");var n,r=_interopRequireDefault(o("aP5i")),i=_interopRequireDefault(o("oP/V")),a=o("Ykg6"),s=o("Vn4U"),c=o("szSY"),l=_interopRequireDefault(o("S+ax")),u=o("n5if"),d=_interopRequireDefault(o("CSDR")),f=_interopRequireDefault(o("mreV")),p=o("SjJ/");function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,o[t])})}return e}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}o("wP27"),t.ContentType=n,function(e){e.SHOP="SHOP",e.JOY="JOY",e.INVENTORY="INVENTORY",e.HOTWORDS="HOTWORDS",e.VIDEO="VIDEO"}(n||(t.ContentType=n={}));var _=function(e){function Content(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Content),_possibleConstructorReturn(this,_getPrototypeOf(Content).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Content,r["default"].Component),function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}(Content,[{key:"render",value:function render(){var e,t,o=this.props,_=o.type,m=o.data,h=o.k,y=o.originIndex,g=o.poi,b=o.__nervkey,v=(0,c.padding)((y||h)+1,3);switch(_){case n.SHOP:e={title:m.shopName,img:(0,l["default"])(m.shopPicUrl),follows:function countFollow(e){if((e=String(e)).length>8){var t=e.length-8;return"".concat(e.slice(0,t),".").concat(e.substr(t,1),"亿")}if(e.length>4){var o=e.length-4;return"".concat(e.slice(0,o),".").concat(e.substr(o,1),"万")}return e}(m.followCount),url:"".concat(s.NICE_SHOP,"?shopid=").concat(m.shopId,"&sid=").concat(m.groupId,"&skus=").concat(m.skuId,"&source=pcfeeds"),logPoi:"".concat(g,"#shop|").concat(v),logDesc:"".concat(m.groupId,"-").concat(m.shopId,"-").concat("1"==m.isSelfOperated?"01":"02","-").concat(m.skuId,"-").concat(m.dsr,"-").concat(m.followCount,"-").concat(m.scn),logText:"还没逛够-店铺-".concat(m.shopName,"-").concat(m.skuId),clstag:"".concat(a.CLSTAGPREFIX).concat(g,"#shop_").concat(v)};break;case n.JOY:e={title:m.title,img:(0,l["default"])("//m.360buyimg.com/img/".concat(m.prodList[0]),_objectSpread({},p.hdImageOpts)),desc:m.subTitle,url:"".concat(s.JOY,"?itemid=").concat(m.itemid,"&babelChannel=").concat(m.deliveryId,"&activityId=").concat(m.activityId,"&linkIds=").concat(m.skuList.join(","),"&source=06"),logPoi:"".concat(g,"#joy|").concat(v),logDesc:"".concat(m.itemid,"-").concat(m.deliveryId,"-").concat(m.skuList.join(",")),logText:"还没逛够-JOY寻宝-".concat(m.title,"-").concat(m.skuList.join(",")),clstag:"".concat(a.CLSTAGPREFIX).concat(g,"#joy|").concat(v)};break;case n.INVENTORY:try{t=JSON.parse(m.summary)}catch(T){t=[]}e={title:m.mainTitle,img:(0,l["default"])("//m.360buyimg.com/".concat(t[0]),_objectSpread({},p.hdImageOpts)),desc:m.description,url:"".concat(s.DAILY,"/album.html?id=").concat(m.id,"&modelType=inventory&source=pcfeeds"),logPoi:"".concat(g,"#cl|").concat(v),logDesc:m.id,logText:"".concat(m.mainTitle,"-").concat(m.skuIds),clstag:"".concat(a.CLSTAGPREFIX).concat(g,"#cl_").concat(v)};break;case n.VIDEO:e={title:m.title,img:(0,l["default"])(m.indexImage),url:"".concat(s.VIDEO,"?id=").concat(m.id),logPoi:"".concat(g,"#vv|").concat(v),logDesc:m.vid,logText:m.title,clstag:"".concat(a.CLSTAGPREFIX).concat(g,"#vv_").concat(v)}}var P={content:(0,i["default"])(["feed-content"],_defineProperty({},"feed-content--".concat(_.toLowerCase()),!0)),contentTitle:(0,i["default"])("feed-content__title",{"feed-content__title--twoline":_==n.VIDEO||_==n.SHOP}),imgWrapper:(0,i["default"])("feed-content__img-wrapper",{"feed-content__img-wrapper--video":_==n.VIDEO})};if("HOTWORDS"==_){var O=m.list?m.list.slice(0,8):[];(0,u.reportExpose)(_objectSpread({poi:"".concat(g,"#search|").concat(v),text:O.map(function(e){return e.keyword}).join("-")},m.ext_columns))}if("SHOP"===_){var I=m.shopId;m.isSelfOperated=(0,c.checkIsHiddenSelfOperator)(I)?"0":m.isSelfOperated}return r["default"].createElement("li",{className:P.content},p.CONTENT_DATA[_]&&r["default"].createElement("a",{className:"feed-content__link",href:"".concat(e.url),title:e.title,"aria-label":e.title,clstag:e.clstag,target:"_blank",onClick:function onClick(){(0,u.reportClick)(_objectSpread({poi:e.logPoi},m.ext_columns,{desc:e.logDesc,text:e.logText,url:e.url}))}},r["default"].createElement("div",{className:P.imgWrapper},r["default"].createElement(d["default"],_extends({},a.LAZYIMGOPTS,{onLoad:function onLoad(){(0,u.reportExpose)(_objectSpread({},m.ext_columns,{poi:e.logPoi,desc:e.logDesc,text:e.logText,url:e.url}))}}),r["default"].createElement(f["default"],{className:"feed-content__img",alt:e.title,src:e.img})),_==n.VIDEO&&r["default"].createElement("div",{className:"feed-content__img--video"})),r["default"].createElement("div",{className:"feed-content__wrapper"},r["default"].createElement("div",{className:"feed-content__tags"},p.CONTENT_DATA[_]&&r["default"].createElement("span",{className:"feed-content__tag"},_==n.SHOP&&"1"==m.isSelfOperated?"自营":p.CONTENT_DATA[_].tag),_==n.SHOP&&r["default"].createElement("span",{className:"feed-content__tag-follows"},e.follows,"人关注")),r["default"].createElement("div",{className:P.contentTitle},e.title),(_==n.INVENTORY||_==n.JOY)&&r["default"].createElement("div",{className:"feed-content__desc"},e.desc),r["default"].createElement("div",{className:"feed-content__btn"},r["default"].createElement("span",null,p.CONTENT_DATA[_].btn)))),"HOTWORDS"==_&&r["default"].createElement("div",null,r["default"].createElement("p",{className:"feed-content__head"},"精选热点"),r["default"].createElement("ul",{className:"feed-content__list"},m.list&&m.list.map(function(e,t){var o="//search.jd.com/Search?keyword=".concat(encodeURIComponent(e.text),"&enc=utf-8");return r["default"].createElement("li",{key:"s_".concat(b),className:"feed-content__list-item"},r["default"].createElement("a",{className:"feed-content__list-link",title:e.text,"aria-label":e.text,href:o,target:"_blank",clstag:"".concat(a.CLSTAGPREFIX).concat(g,"#search_").concat(v,"-0").concat(t+1),onClick:function onClick(n){(0,u.reportClick)(_objectSpread({},e.ext_columns,{poi:"".concat(g,"#search|").concat(v,"-0").concat(t+1),url:o,text:e.text}))}},e.text))}))))}}]),Content}();t["default"]=_},HEwt:function(e,t,o){"use strict";var n=o("m0Pp"),r=o("XKFU"),i=o("S/j/"),a=o("H6hf"),s=o("M6Qj"),c=o("ne8i"),l=o("8a7r"),u=o("J+6e");r(r.S+r.F*!o("XMVh")(function(e){Array.from(e)}),"Array",{from:function from(e){var t,o,r,d,f=i(e),p="function"==typeof this?this:Array,_=arguments.length,m=_>1?arguments[1]:undefined,h=m!==undefined,y=0,g=u(f);if(h&&(m=n(m,_>2?arguments[2]:undefined,2)),g==undefined||p==Array&&s(g))for(o=new p(t=c(f.length));t>y;y++)l(o,y,h?m(f[y],y):f[y]);else for(d=g.call(f),o=new p;!(r=d.next()).done;y++)l(o,y,h?a(d,m,[r.value,y],!0):r.value);return o.length=y,o}})},"SjJ/":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hdImageOpts=t.CONTENT_DATA=t.TAB_DATA=t.isContItemInvalid=t.CONT_TYPES=t.CTN_INTERVAL=t.CTN_ORDER=t.ALLOW_EMPTY_PAGE_COUNT=t.MORE_PAGE_SUM=t.PAGE_NUMS=t.SKU_VIDEO=t.FETCH_PAGE_INTERVAL=t.SOURCE_RECOMMEND=t.SOURCE_AD=void 0,o("rGqo"),o("yt8O"),o("RW0V");t.SOURCE_AD="1";t.SOURCE_RECOMMEND="0";t.FETCH_PAGE_INTERVAL=50;t.SKU_VIDEO=10;t.PAGE_NUMS=25;t.MORE_PAGE_SUM=10;t.ALLOW_EMPTY_PAGE_COUNT=3;t.CTN_ORDER=[4,-1,0,-1,2,-1];t.CTN_INTERVAL=2;var n=["VIDEO","SHOP","INVENTORY","HOTWORDS","JOY"];t.CONT_TYPES=n;t.isContItemInvalid=function isContItemInvalid(e){return!e||-1===n.indexOf(e.type)||null==e.data||0==Object.keys(e.data).length||Array.isArray(e.data)&&0===e.data.length};t.TAB_DATA=[{title:"精选",subtitle:"猜你喜欢",type:"",poi:"01"},{title:"智能先锋",subtitle:"大电器城",type:"1",poi:"02"},{title:"居家优品",subtitle:"品质生活",type:"3",poi:"03"},{title:"超市百货",subtitle:"百货生鲜",type:"4",poi:"04"},{title:"时尚达人",subtitle:"美妆穿搭",type:"2",poi:"05"},{title:"进口好物",subtitle:"京东国际",type:"5",poi:"06"}];t.CONTENT_DATA={SHOP:{tag:"京东好店",btn:"逛好店"},JOY:{tag:"80款商品",btn:"JOY寻宝"},INVENTORY:{tag:"清单",btn:"会买专辑"},VIDEO:{tag:"视频",btn:"发现"}};t.hdImageOpts={resize:["300x300","150x150"],clip:"150x150"}},"Smr/":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,o("91GP"),o("HEwt"),o("a1Th"),o("h7Nl"),o("RW0V"),o("rE2o"),o("ioFf"),o("/SS/"),o("f3/d"),o("xfY5"),o("KKXr"),o("yt8O"),o("rGqo"),o("VRzm");var n=_interopRequireDefault(o("aP5i")),r=_interopRequireDefault(o("qF34")),i=_interopRequireWildcard(o("fXtb")),a=o("I0BZ"),s=o("szSY"),c=_interopRequireDefault(o("S+ax")),l=_interopRequireDefault(o("7xuk")),u=_interopRequireDefault(o("vZHt")),d=o("6OU5"),f=o("R1gS"),p=_interopRequireWildcard(o("8T6v")),_=o("1BlJ"),m=o("n5if"),h=_interopRequireDefault(o("pHFl")),y=_interopRequireDefault(o("Yfql")),g=_interopRequireDefault(o("4UAg")),b=_interopRequireDefault(o("1u2O")),v=_interopRequireDefault(o("Br24")),P=_interopRequireDefault(o("q63S")),O=o("SjJ/");function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};n.get||n.set?Object.defineProperty(t,o,n):t[o]=e[o]}return t["default"]=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,o=new Array(e.length);t<e.length;t++)o[t]=e[t];return o}}(e)||function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,o[t])})}return e}function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){var o=[],n=!0,r=!1,i=undefined;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(o.push(a.value),!t||o.length!==t);n=!0);}catch(c){r=!0,i=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}return o}(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o("aufm"),o("64dS");var I=0,T=0,E=function(e){function Feed(e){var t;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Feed),_defineProperty(_assertThisInitialized(_assertThisInitialized(t=function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}(this,_getPrototypeOf(Feed).call(this,e)))),"moreNode",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"tabNode",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"storeContList",[]),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"actPageNum",0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"pageSize",25),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"pageNum",1),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"failedCnt",0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"domInfo",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"goodImageOpts",{resize:["300x300","150x150"],webp:!0}),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"storeRecommendGoodList",[]),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"storeAdGoodList",[]),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"_onScroll",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"cnt",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"isBusy",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"goodPageNum",0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"_storeGoodsForDuplidate",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"duplidateCounterMap",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"gPage",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"tabOffsetTop",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"goodsDataCache",{1:{pageIndex:1,list:[]},2:{pageIndex:1,list:[]},3:{pageIndex:1,list:[]},4:{pageIndex:1,list:[]},5:{pageIndex:1,list:[]},6:{pageIndex:1,list:[]}}),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"type",""),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"onResize",function(){I=window.innerHeight,t.refreshDomInfo(),t.onScroll()}),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"calculatePagePosInfo",function(e){var o=t.getCtxCount(e),n=t.storeContList.slice(0,o).filter(O.isContItemInvalid).length,r=o-n,i=Math.round(.4*(25-r));return{ctxCount:o,ctxNullCount:n,adCount:i,recommendCount:25-i-r,realCtxCount:r}}),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"getCtxCount",function(e){for(var t=0,o=e-1,n=5*o;n<5*(o+1);n++)n%O.CTN_INTERVAL==0&&t++;return t}),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"getCtxOrder",function(e,t){return O.CTN_ORDER[(5*(e-1)+t)%O.CTN_ORDER.length]}),t.state={hide:!1,list:[],tabList:[],tabIdx:0,cursor:0,isLoadingFirst:!0,isSkusBackup:!1,isLoadComplete:!1,type:"",showFixTab:!1,isTabLoading:!1},t._onScroll=t.onScroll.bind(_assertThisInitialized(_assertThisInitialized(t))),t.onScroll=(0,s.throttle)(t._onScroll,200),t.bindEvent=t.bindEvent.bind(_assertThisInitialized(_assertThisInitialized(t))),t.refreshDomInfo=t.refreshDomInfo.bind(_assertThisInitialized(_assertThisInitialized(t))),t.findMore=t.findMore.bind(_assertThisInitialized(_assertThisInitialized(t))),t.collectPageData=t.collectPageData.bind(_assertThisInitialized(_assertThisInitialized(t))),t.loadPage=t.loadPage.bind(_assertThisInitialized(_assertThisInitialized(t))),t.cnt=0,t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Feed,n["default"].Component),function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}(Feed,[{key:"componentDidMount",value:function componentDidMount(){this.bindEvent()}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize)}},{key:"bindEvent",value:function bindEvent(){this.refreshDomInfo(),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onResize),this.onResize()}},{key:"refreshDomInfo",value:function refreshDomInfo(){this.moreNode&&(this.domInfo=(0,a.getElementPosByParent)(this.moreNode))}},{key:"onScroll",value:function onScroll(){if(T=window.pageYOffset,this.tabNode&&this.tabNode.vnode){var e=(0,a.getElementPosByParent)(this.tabNode.vnode.dom);if(!e)return;this.tabOffsetTop=e.top,T>e.top+e.height?this.state.showFixTab||this.setState({showFixTab:!0}):this.state.showFixTab&&this.setState({showFixTab:!1})}if(!(this.state.list&&this.state.list.length&&T+I<this.domInfo.top+this.domInfo.height-540)){var t=this.state.type;if(""==t){var o=this.state,n=o.hide,r=o.isSkusBackup,i=o.isLoadComplete;if(n||r||i)return;if((0,s.isDebug)("feed",["single"])&&this.pageNum>1)return void this.setState({isLoadComplete:!0});if(this.pageNum>O.MORE_PAGE_SUM)return;this.loadPage()}else if(!this.goodsDataCache[t].loadComplete){if(this.goodsDataCache[t].loading)return;this.loadTabPageData(t)}}}},{key:"loadPage",value:function loadPage(){var e=this,t=this.state.cursor;return this.isBusy?Promise.resolve():(this.isBusy=!0,this.prepareData().then(this.collectPageData).then(function(o){if(0!==o.length){e.failedCnt=0;for(var n=e.state.list.concat(o),a=n.filter(function(e){return!e.isMore}),s={},c=0;c<a.length;c++)s[a[c].__nervkey]=c;n.forEach(function(e){e.originIndex=s[e.__nervkey]}),e.setState({list:n,cursor:e.state.list.length+e.pageSize,isLoadingFirst:!1,loaded:!0,isLoadComplete:e.pageNum>=O.MORE_PAGE_SUM},function(){e.getPrice(t),e.refreshDomInfo(),1==e.pageNum&&(0,m.reportExpose)({poi:"feed|all|null"}),setTimeout(function(){e.pageNum++,e.isBusy=!1,e._onScroll()},O.FETCH_PAGE_INTERVAL)})}else{e.isBusy=!1;var l=!e.state.list||!e.state.list.length;if(e.failedCnt++>=3)return e.setState({isLoadComplete:!0,loaded:!0,hide:l}),void(l&&i["default"].umpBiz({bizid:i.BIZ_HIDDEN,operation:7,result:0}));if(e.goodPageNum>O.ALLOW_EMPTY_PAGE_COUNT&&(!e.state.list||!e.state.list.length)){r["default"].error("前".concat(O.ALLOW_EMPTY_PAGE_COUNT,"页数据为空，隐藏楼层")),e.setState({hide:!0}),i["default"].umpBiz({bizid:i.BIZ_HIDDEN,operation:7,result:0});var u=e.props.onError;return void(u&&u(new Error("前".concat(O.ALLOW_EMPTY_PAGE_COUNT,"页数据为空，隐藏楼层"))))}setTimeout(e._onScroll,O.FETCH_PAGE_INTERVAL)}},function(t){r["default"].error(t),e.isBusy=!1,1===e.pageNum&&(i["default"].umpBiz({bizid:i.BIZ_HIDDEN,operation:7,result:0}),e.setState({hide:!0}))}))}},{key:"prepareData",value:function prepareData(){var e=this;return Promise.all([this.requestSkus(),this.requestOthers()]).then(function(t){var o=_slicedToArray(t,2),n=o[0],r=o[1];n&&n.length&&(e.normalizeGoodList(n),n.forEach(function(t){t.source===O.SOURCE_AD?e.storeAdGoodList.push(t):t.source===O.SOURCE_RECOMMEND&&e.storeRecommendGoodList.push(t)})),r&&r.data&&(e.normalizeContList(r.data),e.storeContList=e.storeContList.concat(r.data))})["catch"](function(e){r["default"].error(e)})}},{key:"normalizeGoodList",value:function normalizeGoodList(e){var t=this;e&&e.forEach(function(e,o){e.type="good",e.url="//item.jd.com/".concat(e.sku,".html"),e.img=(0,c["default"])("//m.360buyimg.com/jdcms/".concat(e.img),_objectSpread({},t.goodImageOpts)),e.extendable=!0,e.deletable=!0,e.isReplace=!1,e.__nervkey=String(Math.random()).split(".")[1]+o+t.cnt++}),r["default"].log("normalizeGoodList: 页码：".concat(this.goodPageNum," 条数：").concat(e.length," 广告：").concat(e.filter(function(e){return e.source===O.SOURCE_AD}).length,", 推荐：").concat(e.filter(function(e){return e.source===O.SOURCE_RECOMMEND}).length))}},{key:"normalizeContList",value:function normalizeContList(e){var t=this;e&&e.forEach(function(e,o){e.__nervkey=String(Math.random()).split(".")[1]+o+t.cnt++})}},{key:"collectPageData",value:function collectPageData(){var e=this.calculatePagePosInfo(this.pageNum),t=e.adCount,o=e.recommendCount,n=Math.min(t,this.storeAdGoodList.length),i=t+o-n;if(i>this.storeRecommendGoodList.length)return r["default"].error("第".concat(this.pageNum,"页: 数据不够 addCount2:").concat(n," <= storeCount:").concat(this.storeAdGoodList.length,", recommendCount2:").concat(i," <= ").concat(this.storeRecommendGoodList.length)),[];for(var a=[],s=0;s<25;s++)s<2*n?a=s%2==0?a.concat(this.storeAdGoodList.splice(0,1)):a.concat(this.storeRecommendGoodList.splice(0,1)):s<n+i&&(a=a.concat(this.storeRecommendGoodList.splice(0,1)));for(var c=0;c<5;c++){var l=this.getCtxOrder(this.pageNum,c);if(-1!==l){var u=this.storeContList.splice(0,1)[0];(0,O.isContItemInvalid)(u)||a.splice(5*c+l,0,u)}}if(25!==a.length)throw new Error("".concat(this.pageNum," 页数量不对 ").concat(a.length));return a.slice(0,25)}},{key:"requestSkus",value:function requestSkus(){var e=this;return this.goodPageNum++,new Promise(function(t,o){(0,l["default"])(e.getRequestUrl(e.goodPageNum),{name:"jsonpMore2Goods",backup:[p.MORE_GOODS_STOBACKUP2],speedID:2,umpID:4,params:{page:e.goodPageNum,pagesize:e.pageSize,area:u["default"].area,source:"pc-home"},dataCheck:function dataCheck(e){return!!(e.success&&e.data&&e.data.length)}}).then(function(o){(o.__$$backupCall||o.code)&&(e.setState({isSkusBackup:!0}),e.goodPageNum>1)?t([]):(o.impr&&(0,_.sendImageLog)(o.impr),t(o.data))})["catch"](function(e){o(e)})})}},{key:"getRequestUrl",value:function getRequestUrl(e){return p.MORE_GOODS2}},{key:"requestOthers",value:function requestOthers(){if(!(this.actPageNum++>=1))return(0,l["default"])(p.MORE2_OTHERS,{name:"jsonpMore2Others",params:{pin:u["default"].pin,uuid:u["default"].uuid,jda:u["default"].jda,num:this.actPageNum,source:"pc-home"},speedID:3,umpID:5,backup:[p.MORE2_OTHERS_BACKUP,p.MORE2_OTHERS_BACKUP1]})}},{key:"getPrice",value:function getPrice(e,t){var o=this,n=t||this.pageSize,i=this.state,a=i.type,s=i.list,c=i.tabList,l=""==a?s:c,u=l.slice(e,e+n).filter(function(e){return"good"===e.type}).map(function(e){return String(e.sku)});Promise.all([this.getNormalPrice(u,l),this.getPromoteAndCouponInfo(u,l),this.getYuyueYushouInfo(u,l),this.getChosenStatus(u,l)]).then(function(){var e=l.slice();e.forEach(function(e){"good"===e.type&&-1!==u.indexOf(String(e.sku))&&(e.priceAllReady=!0)}),""==a?o.setState({list:e}):(o.goodsDataCache[a].list=e,o.setState({tabList:e}))})["catch"](function(e){r["default"].error(e)})}},{key:"getNormalPrice",value:function getNormalPrice(e,t){var o=this;return(0,l["default"])(p.PRICE,{name:"jsonpMorePrice".concat(String(Math.random()).split(".")[1]),params:{pin:encodeURIComponent(u["default"].pin),ext:"0000100",skuIds:e.map(function(e){return"J_".concat(e)}).join(","),area:u["default"].area,source:"pc-home"}}).then(function(e){var n=t.slice();e.forEach(function(e){var t=Number(e.id.substring(2));n.forEach(function(n){"good"===n.type&&n.sku==t&&(n.isExpose=!0,e.p>0?n.price=e.p:n.price=n.jp,e.tpp>0&&(n.tpp=e.tpp),e.nup>0&&(n.nup=e.nup),o.handleReportExpose(n))})})})}},{key:"handleReportExpose",value:function handleReportExpose(e){var t=e.sku,o=e.poi,n=e.originIndex,r=e.isMore,i=e.moreFromIdx,a=e.moreIdx,c=e.ext_columns,l=e.hasCoupon,u=e.promote,d=e.source,p=e.price,_=e.tpp,h=e.nup,y=e.k,g=(0,f.isSkuSelf)(t),b="".concat(o,"#pd"),v=(0,s.padding)((n||y)+1,3);r&&(v="".concat((0,s.padding)(i+1,3),"-").concat((0,s.padding)(a+1,2)));var P="//item.jd.com/".concat(t,".html"),O=c||{},I=l?"02":u?"01":"null",T={0:"02",1:"01"}[d]||"02";O.desc="null-".concat(T,"-").concat(g?"01":"02","-").concat(I,"-").concat(p,"-").concat(_?"01":h?"02":"null");!function sendImpr(){var e=_objectSpread({text:t,url:P},O,{poi:"".concat(b,"|").concat(v)});(0,m.reportExpose)(e)}()}},{key:"getPromoteAndCouponInfo",value:function getPromoteAndCouponInfo(e,t){return Promise.all([this.getCouponInfo(e),this.getPromoteInfo(e)]).then(function(e){var o=_slicedToArray(e,2),n=o[0],r=o[1],i=t.slice();(0,d.isEmpty)(n)&&(0,d.isEmpty)(r)||i.forEach(function(e){var t,o=String(e.sku);null!=n[o]&&(e.hasCoupon=1===n[o]),r.infoResponse[o]&&(t=r.infoResponse[o].promoInfoFieldList),Array.isArray(t)&&(e.promote=t.some(function(e){return e.tags[15]}))})})["catch"](function(e){r["default"].error("获取优惠券促销信息失败",e)})}},{key:"getPromoteInfo",value:function getPromoteInfo(e){return new Promise(function(t){(0,l["default"])(p.PROMOTE_PRICE,{name:"jsonpMorePromotePrice".concat(String(Math.random()).split(".")[1]),params:{sku:e.join(","),pin:u["default"].pin}}).then(function(o){if(0!==o.code||!o.data)return r["default"].error("getPromoteInfo 失败",o,e),void t({});t(o.data)})["catch"](function(e){r["default"].error(e),t({})})})}},{key:"getCouponInfo",value:function getCouponInfo(e){return new Promise(function(t){(0,l["default"])(p.GOOD_COUPON,{name:"jsonpMoreCouponPrice".concat(String(Math.random()).split(".")[1]),params:{skuList:e.join(","),source:"pc-home"},dataCheck:function dataCheck(e){return e&&0===e.code}}).then(function(o){if(0!==o.code||!o.data)return r["default"].error("getCouponInfo 失败",o,e),void t({});t(o.data)})["catch"](function(e){r["default"].error(e),t({})})})}},{key:"validateChosenData",value:function validateChosenData(e){var t=new Error("More_chosen invalid");return e?Promise.resolve(e):Promise.reject(t)}},{key:"validateYuYue",value:function validateYuYue(e){return e?Promise.resolve(e):Promise.reject(new Error("More_yuShouStatus invalid"))}},{key:"markPriceReady",value:function markPriceReady(e,t){t.forEach(function(t){"good"===t.type&&(t.priceReady||-1===e.indexOf(String(t.sku))||(t.priceReady=!0))})}},{key:"getYuyueYushouInfo",value:function getYuyueYushouInfo(e,t){var o=this;if(e&&e.length){for(var n=[],i=e.slice();i.length;)n.push(i.splice(0,20));return Promise.all(n.map(function(e){if(e&&e.length)return(0,l["default"])(p.MORE_YUYUE_YUSHOU,{name:"jsonpYuYueYuShouStatus".concat(String(Math.random()).split(".")[1]),params:{skuList:e.join(","),source:"pc-home"}}).then(function(n){if(n&&0===n.code){var r=n.data;t.slice().forEach(function(e){var t=String(e.sku);if("good"===e.type){var o=r[t];2===o&&(e.yuYueHidePrice=!0),1===o&&(e.yuShouHidePrice=!0)}})}o.markPriceReady(e,t)})["catch"](function(n){r["default"].error(n),o.markPriceReady(e,t)})}))}}},{key:"getChosenStatus",value:function getChosenStatus(e,t){return(0,l["default"])(p.MORE_CHOSEN,{name:"jsonpMoreChosen".concat(String(Math.random()).split(".")[1]),params:{sku:e.join(","),source:"pc-home"}}).then(this.validateChosenData).then(function(o){var n=e.reduce(function(e,t){var n=String(t);return e[n]=o.data[n],e},{});return t.slice().forEach(function(e){if("good"===e.type){var t=String(e.sku),o=n[t];o&&(e.isChosen="1"===o.IsJX,e.isOverseaPurchase=o.isOverseaPurchase,e.isHiddenSelfOperator=(0,s.checkIsHiddenSelfOperator)(o.shop_id))}}),n})}},{key:"findMore",value:function findMore(e,t){var o=this,n=this.state.list[e];(0,l["default"])(p.MORE_FIND,{name:"jsonpMoreFindmore".concat(e),params:{lid:u["default"].areaId,uuid:u["default"].uuid,lim:5,sku:n.sku,source:"pc-home"}}).then(function(r){var i=5*Math.floor(e/5+1),a=r.data.filter(function(e){return"0"===e.mp}).slice(0,5);o.normalizeGoodList(a);var s=o.state.list.concat(),c=o.state.cursor;a.forEach(function(o,n){o.extendable=!1,o.deletable=!1,o.moreFromIdx=t||e,o.moreIdx=n,o.isMore=!0});var l=n.sku;s.forEach(function(e){e.sku===l&&(e.extendable=!1)}),s.splice.apply(s,[i,0].concat(_toConsumableArray(a))),o.setState({list:s,cursor:c+5},function(){o.getPrice(i,5)})})}},{key:"deleteOne",value:function deleteOne(e){var t=this,o=this.state.list,n=o[e],i="src=pc$action=10$p=610009$id=".concat(n.sku,"$dt=0$fbt=1$fbr=0");(0,_.sendRawImageLog)("//mercury.jd.com/log.gif?t=recfb.000000&m=UA-J2011-1&pin=".concat(encodeURIComponent(encodeURIComponent(u["default"].pin||u["default"].uuid)),"&uid=").concat(u["default"].uuid,"&sid=&v=").concat(encodeURIComponent(i),"&ref=").concat(encodeURIComponent(document.referrer),"&rm=").concat(Date.now())),new Promise(function(e){var o=function getStoreItemList(){return n.source===O.SOURCE_AD?t.storeAdGoodList:t.storeRecommendGoodList},r=o();0===r.length?e(t.prepareData().then(function(){var e=o();return e.length?e.splice(0,1)[0]:(e=t.storeAdGoodList.length?t.storeAdGoodList:t.storeRecommendGoodList).length?e.splice(0,1)[0]:null})):e(r.splice(0,1)[0])}).then(function(n){if(n){n.isReplace=!0;var i=o[e];n.__nervkey=i.__nervkey,o.splice(e,1,n),t.setState({list:o},function(){t.getPrice(e,1)})}else r["default"].error("没有可替换的内容")})["catch"](function(e){r["default"].error(e)})}},{key:"handleCheckTab",value:function handleCheckTab(e,t){var o=this;this.tabOffsetTop&&$("html, body").scrollTop(this.tabOffsetTop-60),this.setState({type:e,tabIdx:t},function(){""==e&&(o.refreshDomInfo(),setTimeout(function(){o._onScroll()},O.FETCH_PAGE_INTERVAL))}),""!=e&&this.setState({tabList:[],tabIdx:t},function(){o.goodsDataCache[e].list.length>0?o.setState({tabList:o.goodsDataCache[e].list},function(){o.refreshDomInfo()}):o.loadTabPageData(e)})}},{key:"loadTabPageData",value:function loadTabPageData(e){var t=this;this.goodsDataCache[e].loading=!0,this.setState({isTabLoading:!0}),this.getTabData(e).then(function(o){if(o&&o.length){var n=o.length%5,r=t.goodsDataCache[e].list.length;r+o.length>=200&&(t.goodsDataCache[e].loadComplete=!0),n>0&&(o=o.slice(0,-n)),t.goodsDataCache[e].list=t.goodsDataCache[e].list.concat(o).slice(0,200),t.setState({tabList:t.goodsDataCache[e].list},function(){t.getPrice(r,o.length),t.refreshDomInfo(),t.goodsDataCache[e].pageIndex++,t.goodsDataCache[e].loading=!1})}else t.goodsDataCache[e].loadComplete=!0,t.goodsDataCache[e].loading=!1;t.setState({isTabLoading:!1})})["catch"](function(o){t.goodsDataCache[e].loadComplete=!0,t.goodsDataCache[e].loading=!1,t.setState({isTabLoading:!1})})}},{key:"getTabData",value:function getTabData(e){var t=this,o=this.goodsDataCache[e].pageIndex;return new Promise(function(n,r){(0,l["default"])(p.MORE_TAB_GOODS,{name:"jsonpMoreTabGoods",params:{type:e,page:o,limit:O.PAGE_NUMS,pin:u["default"].pin,uuid:u["default"].uuid,source:"pc-home"},speedID:4,umpID:6,backup:[p.MORE_TAB_GOODS_BACKUP,p["MORE_TAB_GOODS_BACKUP".concat(e)]],dataCheck:function dataCheck(e){return!(0!=e.code||!e.data||!e.data.length)&&!(1==o&&e.data.length<25)}}).then(function(e){if((e.__$$backupCall||e.code)&&o>1)n([]);else{var r=e.data&&e.data.length&&e.data.length>0&&e.data.map(function(e){return{sku:e.productBaseInfo.skuId,price:e.productBaseInfo.pPrice||e.productBaseInfo.jdPrice,t:e.productBaseInfo.name,img:(0,c["default"])(e.productBaseInfo.image,_objectSpread({},t.goodImageOpts)),tpp:e.productBaseInfo.plusPrice,clk:e.productBiInfo.clickUrl,isOverseaPurchase:e.productBaseInfo.isOverseaPurchase,source:"0",type:"good",isMore:!1}})||[];n(r)}})["catch"](function(e){r(e)})})}},{key:"renderLoading",value:function renderLoading(){var e=function loading(e){return n["default"].createElement("em",{style:{backgroundColor:e}})};return n["default"].createElement("div",{className:"more2_loading"},e("#585857"),e("#969796"),e("#D1D2D0"))}},{key:"render",value:function render(){var e=this;if(this.state.hide)return"";try{if(!this.state.loaded)return n["default"].createElement(y["default"],null);var t=this.state,o=t.cursor,i=t.list,a=t.isLoadingFirst,s=t.isSkusBackup,c=t.isLoadComplete,l=t.tabList,u=t.tabIdx,d=t.type,f=t.showFixTab,p=t.isTabLoading;return n["default"].createElement("div",{className:"more2",ref:function ref(t){e.moreNode=t}},n["default"].createElement(h["default"],{title:"为你推荐"}),n["default"].createElement(P["default"],{ref:function ref(t){e.tabNode=t},checkTab:function checkTab(t,o){return e.handleCheckTab(t,o)},active:d}),f&&n["default"].createElement(P["default"],{checkTab:function checkTab(t,o){return e.handleCheckTab(t,o)},tabClass:"feed-tab-wrapper--fixed",active:d}),a?n["default"].createElement(g["default"],null):n["default"].createElement("div",{className:"grid_c1 more2_inner",clstag:"a"},""==d&&i&&i.length&&n["default"].createElement("div",null,n["default"].createElement("ul",{id:"feedContent".concat(u),className:"more2_list clearfix",role:"tabpanel","aria-labelledby":"feedTab".concat(u)},i.slice(0,o).map(function(t,o){if(t.k=o,"good"==t.type)return t.poi="feed|0".concat(Number(d)+1),t.deletable=!s&&t.deletable,n["default"].createElement(b["default"],_extends({},t,{key:"g_".concat(t.__nervkey),findMore:function findMore(){e.findMore(o,t.originIndex)},deleteOne:function deleteOne(){e.deleteOne(o)}}));t.poi="feed|01";var r={type:t.type,k:t.k,poi:t.poi,data:t.data,originIndex:t.originIndex,__nervkey:t.__nervkey};return n["default"].createElement(v["default"],_extends({},r,{key:"a_".concat(t.__nervkey)}))})),!s&&!c&&this.renderLoading()),""!=d&&(l&&l.length?n["default"].createElement("div",null,n["default"].createElement("ul",{id:"feedContent".concat(u),className:"more2_list clearfix",role:"tabpanel","aria-labelledby":"feedTab".concat(u)},l.map(function(e,t){return e.k=t,e.poi="".concat("6"===d?"compfeed":"feed","|").concat({1:"02",3:"03",4:"04",2:"05",5:"06",6:"07"}[d]),e.deletable=!1,e.extendable=!1,n["default"].createElement(b["default"],_extends({},e,{key:"g_".concat(e.__nervkey)}))})),p&&this.renderLoading()):n["default"].createElement(g["default"],null))))}catch(m){var _=this.props.onError;return _&&_(),r["default"].error(m),""}}}]),Feed}();t["default"]=E},V5Un:function(e,t,o){},"Y+8k":function(e,t,o){},mreV:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,o("rE2o"),o("ioFf"),o("/SS/");var n=_interopRequireDefault(o("aP5i")),r=_interopRequireDefault(o("aP5i")),i=_interopRequireDefault(o("oP/V"));function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o("V5Un");var a=function(e){function Lazyimg(e){var t;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Lazyimg),_defineProperty(_assertThisInitialized(_assertThisInitialized(t=function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}(this,_getPrototypeOf(Lazyimg).call(this,e)))),"loaded",!1),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"retryCount",0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"imgDom",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"ctnDom",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"retryTimer",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"getCtnRef",function(e){var o=r["default"].findDOMNode(e);o&&(t.ctnDom=o)}),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"getImgRef",function(e){var o=r["default"].findDOMNode(e);o&&(t.imgDom=o)}),t.load=t.load.bind(_assertThisInitialized(_assertThisInitialized(t))),t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Lazyimg,n["default"].Component),function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}(Lazyimg,[{key:"done",value:function done(){var e=this.props.src,t=this.props.className;this.imgDom&&(this.imgDom.src=e),this.ctnDom&&(this.ctnDom.className=(0,i["default"])("lazyimg","lazyimg_loaded",t))}},{key:"error",value:function error(){var e=this.props.errSrc,t=this.props.className;this.imgDom&&(this.imgDom.src=e,"dataset"in this.imgDom&&(this.imgDom.dataset.src=this.props.src)),this.ctnDom&&(this.ctnDom.className=(0,i["default"])("lazyimg","lazyimg_loaded","lazyimg_error",t))}},{key:"load",value:function load(e){var t=this;clearTimeout(this.retryTimer);var o=new Image,n=!1,r=o.onload=function(){n?o.onload=null:(t.done(),n=!0,o.onload=null)};o.onerror=function(){o.onerror=null,t.retryCount<(t.props.retryTimes||2)?t.retryTimer=window.setTimeout(function(){t.retryCount++,t.load(e)},10):t.error()},o.src=e,o.complete&&r()}},{key:"componentDidMount",value:function componentDidMount(){this.load(this.props.src)}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(e){e.src!==this.props.src&&(this.retryCount=0,this.load(e.src))}},{key:"render",value:function render(){var e=this.props,t=e.lazySrc,o=e.className,r=e.alt;return n["default"].createElement("div",{ref:this.getCtnRef,className:(0,i["default"])("lazyimg",o)},n["default"].createElement("img",{src:t,ref:this.getImgRef,className:"lazyimg_img",alt:r}))}}]),Lazyimg}();_defineProperty(a,"defaultProps",{lazySrc:"//misc.360buyimg.com/mtd/pc/common/img/blank.png",src:"//misc.360buyimg.com/mtd/pc/common/img/blank.png",errSrc:"//misc.360buyimg.com/mtd/pc/common/img/blank.png"});var s=a;t["default"]=s},pHFl:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,o("rE2o"),o("ioFf"),o("/SS/");var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}(o("aP5i"));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}o("uwU0");var r=function(e){function FloorHd(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FloorHd),_possibleConstructorReturn(this,_getPrototypeOf(FloorHd).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(FloorHd,n["default"].Component),function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}(FloorHd,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(){return!1}},{key:"render",value:function render(){var e=this.props.title;return n["default"].createElement("div",{className:"floorhd"},n["default"].createElement("div",{className:"grid_c1 floorhd_inner"},null==e||""===e?n["default"].createElement("h3",{className:"floorhd_tit_empty"}):n["default"].createElement("h3",{className:"floorhd_tit"},e)))}}]),FloorHd}();t["default"]=r},q63S:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,o("rE2o"),o("ioFf"),o("/SS/");var n=_interopRequireDefault(o("aP5i")),r=_interopRequireDefault(o("oP/V")),i=o("Ykg6"),a=o("n5if"),s=o("SjJ/"),c=o("+uuy");function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o("hGIe"),o("Y+8k");var l=function(e){function FeedTab(){var e,t,o;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FeedTab);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _possibleConstructorReturn(o,(t=o=_possibleConstructorReturn(this,(e=_getPrototypeOf(FeedTab)).call.apply(e,[this].concat(r))),_defineProperty(_assertThisInitialized(_assertThisInitialized(o)),"tabs",[]),_defineProperty(_assertThisInitialized(_assertThisInitialized(o)),"selectedTabIdx",0),_defineProperty(_assertThisInitialized(_assertThisInitialized(o)),"curTabIdx",0),_defineProperty(_assertThisInitialized(_assertThisInitialized(o)),"onKeyDown",function(e){(0,c.handleKeydown)(e,{leftCallback:o.handleKeyLeft,rightCallback:o.handleKeyRight,tabCallback:o.handleKeyTab})}),_defineProperty(_assertThisInitialized(_assertThisInitialized(o)),"handleKeyLeft",function(){o.curTabIdx-=1,o.curTabIdx<0&&(o.curTabIdx=s.TAB_DATA.length-1);var e=o.tabs[o.curTabIdx];e&&e.focus()}),_defineProperty(_assertThisInitialized(_assertThisInitialized(o)),"handleKeyRight",function(){o.curTabIdx+=1,o.curTabIdx>s.TAB_DATA.length&&(o.curTabIdx=0);var e=o.tabs[o.curTabIdx];e&&e.focus()}),_defineProperty(_assertThisInitialized(_assertThisInitialized(o)),"handleKeyTab",function(){o.curTabIdx=o.selectedTabIdx}),t))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(FeedTab,n["default"].Component),function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}(FeedTab,[{key:"render",value:function render(){var e=this,t=this.props.active,o={tabItem:function tabItem(e){return(0,r["default"])("feed-tab__item",{"feed-tab__item--active":t===e})},tabWrapper:"grid_c1 feed-tab-wrapper ".concat(this.props.tabClass)};return n["default"].createElement("div",{className:o.tabWrapper},n["default"].createElement("ul",{className:"feed-tab",onKeyDown:this.onKeyDown},s.TAB_DATA.map(function(r,s){var c=r.title,l=r.subtitle;return t===r.type&&(e.selectedTabIdx=s,e.curTabIdx=s),n["default"].createElement("li",{id:"feedTab".concat(s),className:o.tabItem(r.type),key:s,clstag:"".concat(i.CLSTAGPREFIX).concat("6"===r.type?"compfeed":"feed","|top_").concat(r.poi),onClick:function onClick(){(0,a.reportClick)({poi:"".concat("6"===r.type?"compfeed":"feed","|top|").concat(r.poi),text:r.title}),e.props.checkTab(r.type,s)},ref:function ref(t){e.tabs[s]=t},tabIndex:t===r.type?0:-1,"aria-label":"".concat(c," ").concat(l),role:"tab","aria-selected":t===r.type,"aria-controls":"feedContent".concat(s)},n["default"].createElement("div",{className:"feed-tab__item-title"},n["default"].createElement("span",{className:"feed-tab__item-title-text"},c)),n["default"].createElement("div",{className:"feed-tab__item-desc"},l),5!==s&&n["default"].createElement("div",{className:"feed-tab__item-gap"}))})))}}]),FeedTab}();_defineProperty(l,"defaultProps",{checkTab:function checkTab(){},active:"",tabClass:""});var u=l;t["default"]=u},uwU0:function(e,t,o){},wP27:function(e,t,o){}}]);